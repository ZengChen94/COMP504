package controller;

import java.util.List;

import model.ChatRoomAppModel;
import model.IChatRoom;
import model.IHost;
import model.IModel2ViewAdapter;
import view.ChatRoomAppView;
import view.IView2ModelAdapter;

public class ChatRoomAppController {
	
	private ChatRoomAppView<IHost<IChatRoom>, IChatRoom> view;
	private ChatRoomAppModel model;
	
	/**
	 * Constructor.
	 */
	public ChatRoomAppController() {
		view = new ChatRoomAppView<>(new IView2ModelAdapter<IHost<IChatRoom>, IChatRoom>() {

			@Override
			public void startServer(String userName, String serverName) {
				model.startServer(userName, serverName);
			}

			@Override
			public void makeChatRoom(String chatRoomName) {
				model.makeChatRoom(chatRoomName);
			}

			@Override
			public void connectToIP(String ipAddress) {
				model.connectToIP(ipAddress);
			}

			@Override
			public void inviteUser(IHost<IChatRoom> host) {
				model.inviteUser(host);
			}

			@Override
			public void requestChatRooms(IHost<IChatRoom> host) {
				model.requestChatRooms(host);
			}

			@Override
			public void exit() {
				model.exit();
			}

			@Override
			public void exitChatRoom(IChatRoom chatRoom) {
				model.exitChatRoom(chatRoom);
			}

			@Override
			public void sendText(String text) {
				model.sendText(text);
			}

			@Override
			public void joinChatRoom(IChatRoom chatRoom) {
				model.joinChatRoom(chatRoom);
			}
			
		});
		model = new ChatRoomAppModel(new IModel2ViewAdapter() {
			
			@Override
			public void appendInfo(String text) {
				view.appendInfo(text);
			}

			@Override
			public void listConnectedHosts(List<IHost<IChatRoom>> hosts) {
				view.listConnectedHosts(hosts);
			}

			@Override
			public void listChatRooms(List<IChatRoom> chatRoomLIst) {
				view.listChatRooms(chatRoomLIst);
			}

			@Override
			public void createChatRoomComponent(IChatRoom chatRoomStub, String chatRoomName) {
				view.createChatRoomComponent(chatRoomStub, chatRoomName);
			}
		});
	}
	
	/**
	 * start the controller.
	 */
	public void start() {
		view.start();
		model.start();
	}
	
	/**
	 * @param args input arguments.
	 */
	public static void main(String[] args) {
		ChatRoomAppController controller = new ChatRoomAppController();
		controller.start();
	}
}
